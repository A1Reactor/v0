<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>A1 Reactor UI</title>
  <style>
    body { font-family: system-ui, -apple-system, Arial; background:#0b0c10; color:#e8e8e8; margin:0; padding:24px; }
    .card { max-width:900px; margin:0 auto; background:#11131a; padding:18px; border-radius:14px; box-shadow: 0 8px 28px rgba(0,0,0,.35); }
    input, textarea, select { width:100%; padding:10px; border-radius:10px; border:1px solid #2a2f3a; background:#0e1016; color:#e8e8e8; }
    label { display:block; margin-top:12px; margin-bottom:6px; color:#b8c0d0; }
    button { margin-top:14px; padding:10px 14px; border-radius:10px; border:none; background:#6d28d9; color:white; cursor:pointer; }
    pre { background:#0e1016; padding:12px; border-radius:12px; border:1px solid #2a2f3a; overflow:auto; }
    .row { display:flex; gap:12px; }
    .row > div { flex:1; }
  </style>
</head>
<body>
  <div class="card">
    <h1>A1 Reactor</h1>
    <p>Minimal UI for submitting jobs to <code>/v1/jobs</code>.</p>

    <label>API Base URL</label>
    <input id="base" value="http://localhost:8080" />

    <label>Prompt</label>
    <textarea id="prompt" rows="3">cinematic golden hour street shot, handheld, shallow depth of field</textarea>

    <div class="row">
      <div>
        <label>Seconds</label>
        <input id="seconds" type="number" value="2.0" step="0.1" />
      </div>
      <div>
        <label>FPS</label>
        <input id="fps" type="number" value="24" />
      </div>
      <div>
        <label>Seed</label>
        <input id="seed" type="number" value="1337" />
      </div>
    </div>

    <div class="row">
      <div>
        <label>Preset</label>
        <select id="preset">
          <option>cinematic</option>
          <option>studio</option>
          <option>noir</option>
          <option>anime</option>
        </select>
      </div>
      <div>
        <label>Provider</label>
        <select id="provider">
          <option value="mock">mock</option>
          <option value="http">http</option>
        </select>
      </div>
    </div>

    <label>HTTP Endpoint (only if provider=http)</label>
    <input id="http_endpoint" placeholder="https://your-generator.example/v1/frames" />

    <label>Regen windows (JSON, optional)</label>
    <input id="windows" placeholder='[[0.8,1.6]]' />

    <button id="run">Run job</button>

    <h3>Response</h3>
    <pre id="out">â€”</pre>

    <script>
      const $ = (id) => document.getElementById(id);
      $("run").onclick = async () => {
        const base = $("base").value.replace(/\/$/, "");
        const payload = {
          prompt: $("prompt").value,
          seconds: parseFloat($("seconds").value),
          fps: parseInt($("fps").value, 10),
          seed: parseInt($("seed").value, 10),
          style_preset: $("preset").value,
          provider: $("provider").value,
          http_endpoint: $("http_endpoint").value || null
        };
        const w = $("windows").value.trim();
        if (w) payload.regen_windows = JSON.parse(w);

        $("out").textContent = "Running...";
        try {
          const r = await fetch(base + "/v1/jobs", {
            method: "POST",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify(payload)
          });
          const j = await r.json();
          $("out").textContent = JSON.stringify(j, null, 2);
          if (j.status === "done") {
            $("out").textContent += "\n\nDownload: " + base + "/v1/jobs/" + j.id + "/artifact";
          }
        } catch (e) {
          $("out").textContent = "Error: " + e.message;
        }
      };
    </script>
  </div>
</body>
</html>
